<h1>Product catalog</h1>

<div *ngIf="loading; else productsContent"> <!-- Display loading indicator if loading is true -->
    <!-- Add your loading indicator here (e.g., spinner, progress bar) -->
    Loading...
</div>



<ng-template #productsContent>
    <div>
        <input type="text" [(ngModel)]="searchQuery" placeholder="Search by name...">
        <button (click)="search()">Search</button>
    </div>


<div class="sidebar">
    <select [(ngModel)]="selectedCategory" (change)="applyFilters()">
        <option value="">All Categories</option>
        <option *ngFor="let categoryName of categoryNames" [value]="categoryName">{{ categoryName }}</option>
      </select>

      <select [(ngModel)]="selectedBrand" (change)="applyFilters()">
        <option value="">All Brands</option>
        <option *ngFor="let brand of brands" [value]="brand">{{ brand }}</option>
      </select>
    <button (click)="clearFilters()">Clear Filters</button>
</div>
  
<div>
    <div class="pagination">
        <button (click)="onPageChange(pageIndex - 1)" [disabled]="pageIndex === 1"  >Previous</button>
        <span>Page {{ pageIndex }}</span>
        <button (click)="onPageChange(pageIndex + 1)" [disabled]="products.length === 0">Next</button>
    </div>
    
    <div>
        <label for="pageSize">Page Size:</label>
        <select id="pageSize" [(ngModel)]="pageSize" (change)="onPageSizeChange(pageSize)"  [disabled]="products.length === 0">
            <option value="10">10</option>
            <option value="20">20</option>
            <option value="50">50</option>
        <!-- Add more options as needed -->
        </select>
    </div>
</div>

<div *ngIf="products.length > 0; else noProductsMessage">
  <div class="product-card" *ngFor="let product of products">
    <img [src]="product.thumbnail" alt="Product Thumbnail" class="product-thumbnail">
    <div class="product-details">
      <div class="product-title">{{ product.title }}</div>
      <div class="product-price">{{ product.price.current | currency }}</div>
      <div class="product-rating">Rating: {{ product.rating }}</div>
      <div class="product-rating">Stock: {{ product.stock }}</div>
      <div class="product-brand">Brand: {{ product.brand }}</div>
      <button (click)="addToCart(product._id, 1)">Add to Cart</button>
    </div>
  </div>
</div>  
</ng-template>

<ng-template #noProductsMessage>
    <div class="no-products-message">
      There are no products to show.
    </div>
</ng-template>